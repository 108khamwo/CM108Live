<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>CM108 PRO SWITCHER v5.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff3b30; --bg: #000; --panel: #111; }
        body, html { margin: 0; padding: 0; height: 100vh; background: var(--bg); color: #eee; font-family: 'Sarabun', sans-serif; overflow: hidden; }
        .wrapper { display: grid; grid-template-rows: 55px 1fr 110px; height: 100vh; }
        header { background: var(--panel); border-bottom: 1px solid #333; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; }
        .logo { font-size: 20px; font-weight: bold; color: var(--primary); }
        main { background: #000; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
        .control-bar { background: #1a1a1a; border-top: 1px solid #444; padding: 10px 20px; display: flex; flex-direction: column; gap: 8px; }
        .chat-row { display: flex; align-items: center; gap: 15px; }
        .q-btn { background: #333; color: #ccc; border: 1px solid #444; padding: 5px 12px; border-radius: 5px; font-size: 12px; cursor: pointer; }
        .q-btn:hover { background: var(--primary); color: white; }
        .target-select { background: #333; color: white; border: 1px solid #555; padding: 8px; border-radius: 8px; font-family: 'Sarabun'; }
        .chat-input { flex-grow: 1; background: #000; border: 1px solid var(--primary); color: #fff; padding: 10px 15px; border-radius: 8px; font-size: 15px; font-family: 'Sarabun'; }
    </style>
</head>
<body>
<div class="wrapper">
    <header>
        <div class="logo">CM108 <span>PRO SWITCHER</span></div>
        <div style="font-size: 12px; color: #0f0;">● ห้องข่าว: CM108_NewsRoom</div>
    </header>
    <main>
        <iframe id="vdoframe" allow="camera;microphone;fullscreen;display-capture;autoplay" 
                src="https://vdo.ninja/?director=CM108_NewsRoom&quality=0&hidelinks=1&hideheader=1&noheader=1&cleanoutput=1"></iframe>
    </main>
    <footer class="control-bar">
        <div style="display:flex; gap:8px;">
            <span style="font-size:11px; color:#666;">ส่งด่วน: </span>
            <button class="q-btn" onclick="sendQuick('เตรียมตัว... เข้าสัญญาณใน 3-2-1')">นับถอยหลัง</button>
            <button class="q-btn" onclick="sendQuick('แพนกล้องไปทางซ้ายหน่อยครับ')">สั่งแพนซ้าย</button>
            <button class="q-btn" onclick="sendQuick('เช็คเน็ตด่วน! ภาพเริ่มกระตุก')">เตือนสัญญาณ</button>
            <button class="q-btn" onclick="sendQuick('จบช่วงนี้แล้ว พักเบรกได้ครับ')">จบช่วง</button>
        </div>
        <div class="chat-row">
            <select id="targetCam" class="target-select">
                <option value="all">ส่งหาทุกคน (All)</option>
                <option value="CM108_Cam1">กล้อง 1</option>
                <option value="CM108_Cam2">กล้อง 2</option>
                <option value="CM108_Cam3">กล้อง 3</option>
                <option value="CM108_Cam4">กล้อง 4</option>
            </select>
            <input type="text" id="chatInput" class="chat-input" placeholder="พิมพ์ข้อความที่นี่แล้วกด Enter..." onkeydown="if(event.key === 'Enter') sendMessage()">
        </div>
    </footer>
</div>
<script>
    function sendMessage() {
        const input = document.getElementById('chatInput');
        sendToNinja(input.value.trim());
        input.value = '';
    }
    function sendQuick(text) { sendToNinja(text); }
    function sendToNinja(msg) {
        if (!msg) return;
        const target = document.getElementById('targetCam').value;
        const frame = document.getElementById('vdoframe');
        const payload = { "msg": "chat", "content": msg };
        if (target !== 'all') { payload.to = target; }
        frame.contentWindow.postMessage(payload, '*');
    }
</script>
</body>
</html>
